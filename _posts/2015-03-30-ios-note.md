---
layout: post
title: IOS 随身记
category: 技术
tag: [IOS]
description: IOS
---


### 打开相册和相机时状态栏不隐藏的问题
IOS7要隐藏状态栏，需要在info.plist文件中添加View controller-based status bar appearance ，并且把值设置为NO。
但是打开相册或相机的时候，状态栏还是透明显示出来了，在网上找了一下解决方案，终于解决了。
在使用了UIImagePickController的controller里或者UIImagePickController的子类里添加如下代码。其中JKIsIOS7OrLater()是判断当前设备的版本号是不是ios7。

	- (void)viewWillAppear:(BOOL)animated
	{
	    [super viewWillAppear:animated];
	    if (JKIsIOS7OrLater()) {
	        [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO];
	    }
	}
	- (void)viewWillDisappear:(BOOL)animated
	{
	    [super viewWillDisappear:animated];
	    if (JKIsIOS7OrLater()) {
	        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:NO];
	    }
	}
	BOOL JKIsIOS7OrLater(void)
	{
	    if ([[[UIDevice currentDevice] systemVersion] floatValue]>= 7.0) {
	        return YES;
	    } else {
	        return NO;
	    }
	}

### IOS7  UIVIewController 的view的高度问题
devdiv上有这样一段
之前的版本中UIViewController中的view在显示后会自动调整为去掉导航栏的高度的。这样我们摆放控件的时候就会在导航栏的下面显示。但是在iOS7中UIViewController的wantsFullScreenLayout已经被舍弃了，不再提供此属性，所有的UIViewControler创建后默认就是full Screen的，因此如果带导航栏的应用界面中的部分控件会被导航栏覆盖掉。
要解决这中情况可以使用iOS7中UIViewController新增的属性extendedLayoutIncludesOpaqueBars和edgesForExtendedLayout来解决。其中这个属性指定了当Bar使用了不透明图片时，视图是否延伸至Bar所在区域，默认值时NO。而edgesForExtendedLayout则是表示视图是否覆盖到四周的区域，默认是UIRectEdgeAll，即上下左右四个方向都会覆盖，那么为让顶部不进行延伸到导航栏覆盖的区域，我们可以把顶部区域延伸去掉。实现代码如下：

	self.extendedLayoutIncludesOpaqueBars = NO;
	self.edgesForExtendedLayout = UIRectEdgeBottom | UIRectEdgeLeft | UIRectEdgeRight;

我在做的时候发现viewDidLoad的时候view的高度还是全屏，viewWillAppear已经去掉navigationbar了，所以frame的设置放在了viewWillAppear中比较准确。

### 常用宏

		#define NSLogRect(rect) NSLog(@"%s x:%.4f, y:%.4f, w:%.4f, h:%.4f", #rect, rect.origin.x, rect.origin.y, rect.size.width, rect.size.height)       
		#define NSLogSize(size) NSLog(@"%s w:%.4f, h:%.4f", #size, size.width, size.height)       
		#define NSLogPoint(point) NSLog(@"%s x:%.4f, y:%.4f", #point, point.x, point.y) 
		#define NSLog(format, ...) do {                                                                          \       
		                             fprintf(stderr, "<%s : %d> %s\n",                                           \       
		                             [[[NSString stringWithUTF8String:__FILE__] lastPathComponent] UTF8String],  \       
		                             __LINE__, __func__);                                                        \       
		                             (NSLog)((format), ##__VA_ARGS__);                                           \       
		                             fprintf(stderr, "-------\n");                                               \       
		                           } while (0)

### objc/runtime.h

	//向类中添加Method 
	BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types)
	//修改类的Method IMP 
	class_replaceMethod(Class cls, SEL name, IMP imp, const char *types)
	//交换2个方法中的IMP 
	void method_exchangeImplementations(Method m1, Method m2)
	//获取类的某个实例方法 
	Method class_getInstanceMethod(Class aClass, SEL aSelector);

### 常用插件

AFNetWorking
MBProgressHUD
PullTableView
JSONModel
Aspects

### NSHomeDirectory()
可以得到应用程序目录的路径，该路径下有三个文件夹：Documents,Library,temp以及一个.app包。